!function t(i,e,n){function o(r,u){if(!e[r]){if(!i[r]){var l="function"==typeof require&&require;if(!u&&l)return l(r,!0);if(s)return s(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var c=e[r]={exports:{}};i[r][0].call(c.exports,function(t){var e=i[r][1][t];return o(e?e:t)},c,c.exports,t,i,e,n)}return e[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,i,e){"use strict";t("./lib/config");var n=t("./lib/core/events"),o=t("./lib/core/mixin/eventbus"),s={};s.$broadcast=o.broacast,s.$listenToBus=o.listenToBus,s.$=Backbone.$,s.Events=n,s.Object=t("./lib/core/object"),s.Collection=t("./lib/core/collection"),s.Model=t("./lib/core/model"),s.View=t("./lib/core/view"),s.CollectionView=t("./lib/collection-view"),i.exports=window.Dbb=s},{"./lib/collection-view":2,"./lib/config":3,"./lib/core/collection":6,"./lib/core/events":7,"./lib/core/mixin/eventbus":8,"./lib/core/model":11,"./lib/core/object":12,"./lib/core/view":13}],2:[function(t,i,e){"use strict";function n(){var t=_.result(this,"placeholder");if(t){var i=_.result(this,"$mountPointForSubview");i.find(t).length||i.append(t)}}function o(){var t=_.result(this,"placeholder");if(t){var i=_.result(this,"$mountPointForSubview");i.find(t).length&&(t instanceof $?t.detach():$(t).detach())}}function s(){this.$count()?o.call(this):n.call(this)}function r(t,i,e){var n=this;e=e||{};var o=this.$viewForItem(t,i).$render();return clearTimeout(this._addTimer),this._buffer||(this._buffer=[]),this._buffer.push(o),this._addTimer=setTimeout(function(){e.sort!==!1?(n.$addSubview(n._buffer,{shouldDelegateEvents:!0,transition:d}),a.call(n,n.collection,{})):n.$addSubview(n._buffer,{shouldDelegateEvents:!0,transition:h}),n._buffer.length=0,n.trigger("itemDidAdd")},0),s.call(this),this}function u(t,i,e){return this.$removeSubview(e.index,{transition:f}),this.trigger("itemDidRemove"),s.call(this),this}function l(t,i){s.call(this),this.$emptySubviews();var e=[];return t.each(function(t,i,n){e.push(this.$viewForItem(t,n))},this),this.$addSubview(e,{shouldDelegateEvents:!0,transition:h}),this.trigger("itemDidReset"),s.call(this),this}function a(t,i){if(!this.$isNotEmpty())return this;var e=this;return this._sortTimer=setTimeout(function(){var n,o,s,r=void 0,u=e.$count();if(t.length===u){n=e.$getSubviews(),r=new Array(u);for(var l=0;l<u;l+=1){var c=t.indexOf(n[l].model);r[c]=n[l]}e.__subviews__=r,o=_.result(e,"$mountPointForSubview",e.$el),s=$(document.createDocumentFragment()),e.$eachSubview(function(t){s.append(t.$el)}),o.append(s),o.get(0).offsetHeight,e.$eachSubview(function(t){t.$el.css("opacity",1)}),e.trigger("itemDidSort")}else a.call(e,t,i)},0),s.call(this),this}var c=t("./core/view"),h={subviewWillAdd:function(t){t.css("transition",""),t.css("opacity",0)},subviewDidAdd:function(t){t.css("transition","opacity .2s"),t.css("opacity",1)}},d={subviewWillAdd:function(t){t.css("transition",""),t.css("opacity",0)},subviewDidAdd:function(t){t.css("transition","opacity .2s")}},f={subviewWillRemove:function(t){t.css("transition",""),t.css("opacity",1)},subviewDidRemove:function(t,i){t.css("transition","opacity .2s"),t.css("opacity",0),setTimeout(i,200)}},v=c.extend({constructor:function p(t){return this instanceof p?(t.collection&&this.$setCollection(t.collection),void c.call(this,t)):new p(t)},$setCollection:function(t){return this.collection&&this.stopListening(this.collection),this.collection=t,this.listenTo(t,"add",r),this.listenTo(t,"remove",u),this.listenTo(t,"reset",l),this.listenTo(t,"sort",a),this},$viewForItem:function(t,i){return new c({model:t})},$renderItems:function(){if(this.$updatePlaceholder.call(this),this.collection.length){this.$emptySubviews();var t=[];this.collection.each(function(i,e,n){t.push(this.$viewForItem(i,n))},this),this.$addSubview(t,{shouldDelegateEvents:!0,transition:h})}return this},$updatePlaceholder:function(){return s.call(this),this}});i.exports=v},{"./core/view":13}],3:[function(t,i,e){"use strict"},{}],4:[function(t,i,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o={value:{get:function(t,i,e){return t.val()},set:function(t,i,e,n){t.val()!==e&&(t.val(e),t.trigger("change"))}},checked:{get:function(t,i,e){return t.prop("checked")},set:function(t,i,e,n){t.prop("checked")!==e&&(t.prop("checked",e),t.trigger("change"))}},selected:{get:function(t,i,e){return _.find(t.find("option"),function(t){return t.selected===!0}).value},set:function(t,i,e,n){var o=_.find(t.find("option"),function(t){return t.value===e});o&&!o.selected&&(o.selected=!0,t.trigger("change"))}},option:{get:function(t,i,e){return _.find(t.find("option"),function(t){return t.selected===!0}).innerHTML},set:function(t,i,e,n){var o=_.find(t.find("option"),function(t){return t.innerHTML===e});o&&!o.selected&&(o.selected=!0,t.trigger("change"))}},radio:{get:function(t,i,e){return _.find(t,function(t){return t.checked===!0}).value},set:function(t,i,e,n){var o=_.find(t,function(t){return t.value===e});o&&!o.checked&&(o.checked=!0,$(o).trigger("change"))}},text:{get:function(t,i,e){return t.html()},set:function(t,i,e,n){t.html()!==e&&t.html(e)}},prop:{get:function(t,i,e){return t.prop(i)},set:function(t,i,e,n){t.prop(i)!==e&&t.prop(i,e)}},data:{get:function(t,i,e){return t.data(i)},set:function(t,i,e,n){t.data(i)!==e&&t.data(i,e)}},attr:{get:function(t,i,e){return t.attr(i)},set:function(t,i,e,n){t.attr(i)!==e&&t.attr(i,e)}}},s=t("../object"),r=s.extend({constructor:function(t,i,e){s.call(this);var n={view:t,model:i,data:e};_.extend(this,n),_.isFunction(this.initialize)&&this.initialize()},$dealloc:function(){this.unbind(),s.prototype.$dealloc.call(this)},get:function(t,i){return _.result(this.data,t,i)},set:function(t,i){var e=this,o={},s={},r=this.get(t);return"string"!=typeof t&&"number"!=typeof t||r===i?"object"===("undefined"==typeof t?"undefined":n(t))&&_.each(t,function(t,i){var n=e.get(i);n!==t&&(o[i]=n,s[i]=t,e.data[i]=t,e.trigger("change:"+i,e,t,{prev:n}))}):(o[t]=r,s[t]=i,this.data[t]=i,this.trigger("change:"+t,this,i,{prev:r})),this.trigger("change",this,s,o),this},selector:function u(){var u=this.get("selector");return u?u:(u=$.trim(this.get("targetInfo").replace(/(^(\s+)?\S+(\s+)?@)(\s+)?/,"")),u&&this.set("selector",u),u)},$el:function(){var t=this.selector();return"$el"===t?this.view.$el:this.view.$(t)},tagName:function l(){var l=this.get("tagName");if(l)return l;var t=this.$el().get(0);return l=t&&t.tagName.toLowerCase(),l&&this.set("tagName",l),l},_pick_update_key:function(){var t=this.get("targetInfo").match(/\S+(\s+)?@/);return t?$.trim(t[0].replace("@","")):""},ui_update_info:function(){var t=this.get("ui_update_info");if(t)return t;var i=this.$el(),e=this.tagName(),n="buildin",o=this._pick_update_key(),s=o,r=void 0,u=void 0;if("view."===o.substr(0,5)&&(n="view",s=o.slice(5)),"data-"===o.substr(0,5))s=o.slice(5),r="data",u="data";else if("input"===e)if(o&&"view"!==n)r=u="value"===o?"value":"attr";else{var l=i.attr("type");r=u="checkbox"!==l&&"radio"!==l?"value":l}"textarea"!==e||r||u||(r=u="value"),"select"!==e||r||u||(r=u="option"===o?"option":"selected"),r||u||(r=u=o&&"text"!==o?"attr":"text");var a={host:n,field:s,get:r,set:u};return this.set("ui_update_info",a),a},BuildInUIAccessor:o,updateUI:function(t){var i=this.$el();if(0!==i.length){var e=this.ui_update_info(),n=void 0,o=void 0;"view"===e.host&&(n=this.view[e.field],n&&n.set?o=n.set:_.isFunction(n)&&(o=n)),n&&o||(n=this.BuildInUIAccessor[e.set],o=n.set),o.call(this.view,i,e.field,t,this.get("dataKey"))}},updateModel:function(t){if("model."===this.get("dataKey").substr(0,5)){var i=this.get("dataKey").slice(5);_.isFunction(this.model[i])&&this.model[i](t)}else this.model.set(this.get("dataKey"),t)},getUIValue:function(){var t=this.$el();if(0!==t.length){var i=this.tagName();if("input"===i||"textarea"===i||"select"===i){var e=this.ui_update_info(),n=void 0,o=void 0;"view"===e.host&&(n=this.view[e.field],n&&n.get?o=n.get:_.isFunction(n)&&(o=n)),n&&o||(n=this.BuildInUIAccessor[e.get],o=n.get);var s=o.call(this.view,t,e.field,this.get("dataKey"));return s}}},_UI_updater:function(t,i,e){var n=this.$el();n.length&&this.updateUI(i)},_model_updater:function(t){if(0!==this.$el().length){var i=this.tagName();if("input"===i||"textarea"===i||"select"===i){var e=this.getUIValue();this.updateModel(e)}}},syncDataToUI:function(){var t=this.model.get(this.get("dataKey"));this.updateUI(t)},syncDataToModel:function(){var t=this.getUIValue();this.updateModel(t)},initialize:function(){this.model_updater=this._model_updater.bind(this),this.UI_updater=this._UI_updater.bind(this)},bind:function(){this.view.listenTo(this.model,"change:"+this.get("dataKey"),this.UI_updater),"$el"===this.selector()?this.view.$el.on("change",this.model_updater):this.view.$el.on("change",this.selector(),this.model_updater)},unbind:function(){this.view.stopListening(this.model,"change:"+this.get("dataKey"),this.UI_updater),"$el"===this.selector()?this.view.$el.off("change",this.model_updater):this.view.$el.off("change",this.selector(),this.model_updater)}});i.exports=r},{"../object":12}],5:[function(t,i,e){"use strict";function n(t,i,e){var n=[];return _.each(e,function(e,o){e=e.split(","),o=o.split(","),_.each(e,function(e){_.each(o,function(o){o&&e&&n.push(new u(t,i,{targetInfo:o,dataKey:e}))})})}),n}function o(t,i,e){_.isArray(t.__bindingRecords__)||(t.__bindingRecords__=[]);var o=n(t,i,e);t.__bindingRecords__=t.__bindingRecords__.concat(o),_.each(o,function(t){t.bind()})}function s(t,i,e){e=e||t.__bindingRecords__||[],_.each(e,function(t){t.unbind()});var n=_.reject(t.__bindingRecords__,function(t){return _.includes(e,t)});n.length?t.__bindingRecords__=n:delete t.__bindingRecords__}function r(t,i){var e=t.__bindingRecords__||[];_.each(e,i?function(t){return t.syncDataToModel()}:function(t){return t.syncDataToUI()})}var u=t("./binding-record");i.exports={bind:o,unbind:s,syncData:r}},{"./binding-record":4}],6:[function(t,i,e){"use strict";var n=t("./mixin/utils"),o=t("./mixin/eventbus"),s=Backbone.Collection.extend({constructor:function r(t){return this instanceof r?void Backbone.Collection.call(this,t):new r(t)},$broadcast:o.broacast,$listenToBus:o.listenToBus,$callHook:n.callHook});i.exports=s},{"./mixin/eventbus":8,"./mixin/utils":10}],7:[function(t,i,e){"use strict";var n=Backbone.Events;i.exports=n},{}],8:[function(t,i,e){"use strict";var n=t("../events"),o=_.extend({},n);e.broacast=function(){return o.trigger.apply(o,_.toArray(arguments)),this},e.listenToBus=function(t,i){var e=_.isFunction(this.listenTo)?this:o;return e.listenTo(o,t,i),this}},{"../events":7}],9:[function(t,i,e){"use strict";e.isRetained=function(){return _.has(this,"__isRetained__")&&!!this.__isRetained__},e.isDealloc=function(){return!this.__isRetained__||!_.has(this,"__isRetained__")}},{}],10:[function(t,i,e){"use strict";e.callHook=function(t){var i=_.map(String(t).split(":"),function(t,i){return i>0?t.charAt(0).toUpperCase()+t.slice(1):t}).join("");return _.isFunction(this[i])&&this[i].apply(this,_.rest(arguments)),_.isFunction(this.trigger)&&this.trigger.apply(this,_.toArray(arguments)),this}},{}],11:[function(t,i,e){"use strict";var n=t("./mixin/utils"),o=t("./mixin/eventbus"),s=Backbone.Model.extend({constructor:function r(t){return this instanceof r?void Backbone.Model.call(this,t):new r(t)},$broadcast:o.broacast,$listenToBus:o.listenToBus,$callHook:n.callHook,$toDataForView:function(){return this.toJSON()}});i.exports=s},{"./mixin/eventbus":8,"./mixin/utils":10}],12:[function(t,i,e){"use strict";function n(){this.__isRetained__=1}var o=t("./mixin/utils"),s=t("./mixin/life-circle"),r=t("./events"),u=t("./mixin/eventbus"),l=t("./model");_.extend(n.prototype,r,{$isRetained:s.isRetained,$isDealloc:s.isDealloc,$callHook:o.callHook,$broadcast:u.broacast,$listenToBus:u.listenToBus,$dealloc:function(){return this.$isRetained()?(delete this.__isRetained__,this.stopListening(),this.$callHook("didDealloc"),this.off(),_.each(_.keys(this),function(t){delete this[t]},this),this):this}}),n.extend=l.extend,i.exports=n},{"./events":7,"./mixin/eventbus":8,"./mixin/life-circle":9,"./mixin/utils":10,"./model":11}],13:[function(t,i,e){"use strict";function n(t){return $.contains(document.documentElement,t instanceof $?t[0]:t)}function o(t){return this.listenTo(t,"all",s),this}function s(t){var i=["subview."+t].concat(_.rest(arguments));this.trigger.apply(this,i)}function r(t){return this.stopListening(t),this}var u=t("./mixin/utils"),l=t("./mixin/life-circle"),a=t("./mixin/eventbus"),c=t("./binder"),h=["model","collection","el","id","attributes","className","tagName","events"],d=["supportLifeCycle","mountPointSelector","shouldPropagateViewWillMount","shouldPropagateViewDidMount","shouldPropagateViewWillUnmount","shouldPropagateViewDidUnmount","shouldDelegateEvents","transition","shouldPreventDealloc"],f=h.concat(d),v=Backbone.View.extend({constructor:function p(t){if(!(this instanceof p))return new p(t);this.__isRetained__=1,this.options=_.extend({},this.__defaultOptions__,_.pick(this.options||{},d),_.pick(t,d)),_.extend(this,_.omit(t,f));var i=_.result(t,"el"),e=i&&n(i);if(e){var o=this.$getOption(t,["supportLifeCycle","shouldPropagateViewWillMount"]),s=o.supportLifeCycle,r=o.shouldPropagateViewWillMount;s&&this.$callHook("viewWillMount",this),r&&this.$propagateLifeCycleHook("viewWillMount")}if(Backbone.View.call(this,t),e){var u=this.$getOption(t,["supportLifeCycle","shouldPropagateViewDidMount"]),l=u.supportLifeCycle,a=u.shouldPropagateViewDidMount;l&&this.$callHook("viewDidMount",this),a&&this.$propagateLifeCycleHook("viewDidMount")}},__defaultOptions__:{supportLifeCycle:!0,mountPointSelector:".dbbview-mountpoint",shouldPropagateViewWillMount:!0,shouldPropagateViewDidMount:!0,shouldPropagateViewWillUnmount:!0,shouldPropagateViewDidUnmount:!0,shouldDelegateEvents:!1,transition:{},shouldPreventDealloc:!1},initialize:function(t){this.bindings&&this.$render()},$broadcast:a.broacast,$listenToBus:a.listenToBus,$callHook:u.callHook,$isRetained:l.isRetained,$isDealloc:l.isDealloc,$getOption:function(t,i){if(i)return t=_.extend({},this.options,t||{}),"string"==typeof i?_.result(t,i):_.pick(t,i)},$dealloc:function(t){var i=this;if(this.$isDealloc())return this;var e=this.$getOption(t,"supportLifeCycle");e&&this.$callHook("viewWillDealloc",this);var n=this.$count();if(this.$isNotEmpty())for(;n--;)this.__subviews__[n].$dealloc();return delete this.__isRetained__,this.remove(),e&&this.$callHook("viewDidDealloc",this),this.off(),_.each(_.keys(this),function(t){"cid"!==t&&delete i[t]},this),this},$bind:function(t,i){return t=t||this.model,i=i||_.result(this,"bindings"),t&&i?(c.bind(this,t,i),this):this},$unbind:function(t,i){return t=t||this.model,i=i||this.__bindingRecords__,t&&i?(c.unbind(this,t,i),this):this},$syncBindingData:function(t){return c.syncData(this,t),this},$render:function(t,i){t=t||this.model||{};var e=this.$getOption(i,"supportLifeCycle"),n=this.$isMounted();e&&(this.$callHook("viewWillRender",this),n&&this.$callHook("viewWillRefresh",this));var o=_.result(this,"$templateForView");if(_.isFunction(o)){var s=void 0;this.$isNotEmpty()&&(s=$(document.createDocumentFragment()),this.$eachSubview(function(t){return s.append(t.$el)}));var r=this.$dataForView(t);this.$el.html(o(r)),this.__$mountPoint__=_.result(this,"$mountPointForSubview",this.$el).eq(0),s&&this.__$mountPoint__.append(s)}else this.__$mountPoint__=_.result(this,"$mountPointForSubview",this.$el).eq(0);return e&&(this.$callHook("viewDidRender",this),n&&this.$callHook("viewDidRefresh",this)),this.$setRendered(),this.bindings&&this.model&&this.$unbind().$bind(),this},$dataForView:function(t){return _.result(t,"$toDataForView",_.result(t,"toJSON",Object(t)))},$templateForView:function(){if(this.__templateFunctionCache__)return this.__templateFunctionCache__;var t=this.options.template||this.template;return"string"==typeof t&&(t=_.template(t)),_.isFunction(t)?(this.__templateFunctionCache__=t,t):void 0},$mountPointForSubview:function(t){var i=this.$(this.$getOption(t,"mountPointSelector"));return i.length?i:this.$el},$isMounted:function(){return n(this.el)},$isRendered:function(){return this.__isRendered__},$setRendered:function(){return this.__isRendered__=!0,this},$mountToEl:function(t,i){if(this.$isDealloc())return this;if(this.$isMounted())return this;if(t instanceof $||(t=$(t)),!n(t.get(0)))return this;var e=this.$getOption(i,["supportLifeCycle","shouldPropagateViewWillMount","shouldPropagateViewDidMount","transition"]),o=e.supportLifeCycle,s=e.shouldPropagateViewWillMount,r=e.shouldPropagateViewDidMount,u=e.transition;return this.$isRendered()||this.$render(),o&&this.$callHook("viewWillMount",this),s&&this.$propagateLifeCycleHook("viewWillMount"),_.isFunction(u.viewWillMount)&&u.viewWillMount(this.$el),t.eq(0).append(this.$el),_.isFunction(u.viewDidMount)&&u.viewDidMount(this.$el),o&&this.$callHook("viewDidMount",this),r&&this.$propagateLifeCycleHook("viewDidMount"),this},$unmount:function(t){if(this.$isDealloc())return this;if(!this.$isMounted())return this;var i=this.$getOption(t,["supportLifeCycle","shouldPropagateViewWillUnmount","shouldPropagateViewDidUnmount","transition"]),e=i.supportLifeCycle,n=i.shouldPropagateViewWillUnmount,o=i.shouldPropagateViewDidUnmount,s=i.transition;return e&&this.$callHook("viewWillUnmount",this),n&&this.$propagateLifeCycleHook("viewWillUnmount"),_.isFunction(t.transition.viewWillUnmount)&&s.viewWillUnmount(this.$el),this.$el.detach(),_.isFunction(s.viewDidUnmount)&&s.viewDidUnmount(this.$el),e&&this.$callHook("viewDidUnmount",this),o&&this.$propagateLifeCycleHook("viewDidUnmount"),this},$addSubview:function(t,i){var e=this;i||(i={});var n=void 0;if(_.isArray(t)){if(t=_.filter(t,function(t){return t instanceof v&&t.$isRetained()&&!e.$hasSubview(t)},this),!(n=t.length))return this}else{if(!(t&&t instanceof v&&t.$isRetained())||this.$hasSubview(t))return this;t=[t],n=1}var s=this.$getOption(i,["supportLifeCycle","shouldPropagateViewWillMount","shouldPropagateViewDidMount","shouldDelegateEvents","transition","atIndex"]),r=s.supportLifeCycle,u=s.shouldPropagateViewWillMount,l=(s.shouldPropagateViewDidMount,s.shouldDelegateEvents),a=s.transition,c=s.atIndex,h=this.__subviews__||(this.__subviews__=[]),d=h.length,f=$(document.createDocumentFragment());"string"==typeof c?c="first"===c?0:"last":"number"==typeof c?(c<0||c>=d)&&(c="last"):c="last",i.atIndex=c,r&&this.$callHook("subviewWillAdd",t,this,i);var p=void 0;if(l)for(p=0;p<n;p+=1)o.call(this,t[p]);this.$isRendered()||this.$render();var g=void 0;for(p=0;p<n;p+=1)g=t[p],g.$isRendered()||g.$render(),f.append(g.$el);var w=this.$isMounted();if(w)for(p=0;p<n;p+=1)g=t[p],g.options.supportLifeCycle&&g.$callHook("viewWillMount",g),u&&g.$propagateLifeCycleHook("viewWillMount");if(_.isFunction(a.subviewWillAdd))for(p=0;p<n;p+=1)g=t[p],a.subviewWillAdd(g.$el);if("last"===c?(this.__$mountPoint__.append(f),this.__subviews__=h.concat(t)):(h[c].$el.before(f),this.__subviews__=h.slice(0,c).concat(t).concat(h.slice(c))),_.isFunction(a.subviewDidAdd))for(this.el.offsetHeight,p=0;p<n;p+=1)g=t[p],a.subviewDidAdd(g.$el);for(p=0;p<n;p+=1)g=t[p],g.__superview__=this;if(w)for(p=0;p<n;p+=1)g=t[p],g.options.supportLifeCycle&&g.$callHook("viewDidMount",g),u&&g.$propagateLifeCycleHook("viewDidMount");return r&&this.$callHook("subviewDidAdd",t,this,i),this},$removeSubview:function(t,i){if(i||(i={}),!this.$isNotEmpty())return this;if(void 0===t)return this;var e=this.$getOption(i,["supportLifeCycle","shouldPropagateViewWillUnMount","shouldPropagateViewDidUnMount","shouldPreventDealloc","transition"]),n=e.supportLifeCycle,o=e.shouldPropagateViewWillUnMount,s=(e.shouldPropagateViewDidUnMount,e.shouldPreventDealloc),u=e.transition,l=this.__subviews__,a=void 0;return t instanceof v?a=this.$indexOfSubview(t):(a="number"==typeof t?t<0||t>=this.$count()?-1:t:"first"===t?0:"last"===t?this.$count()-1:-1,t=null),a===-1?this:(null===t&&(t=l[a]),i.view=t,i.atIndex=a,n&&this.$callHook("subviewWillRemove",t,this,i),l.splice(a,1),delete t.__superview__,r.call(this,t),t.$isMounted()&&(t.options.supportLifeCycle&&t.$callHook("viewWillUnmount",t),o&&t.$propagateLifeCycleHook("viewWillUnmount")),_.isFunction(u.subviewWillRemove)&&u.subviewWillRemove(t.$el),_.isFunction(u.subviewDidRemove)?(this.el.offsetHeight,u.subviewDidRemove(t.$el,function(){t.$el.detach(),t.$isMounted()||(t.options.supportLifeCycle&&t.$callHook("viewDidUnmount",t),o&&t.$propagateLifeCycleHook("viewDidUnmount")),n&&this.$callHook("subviewDidRemove",t,this,i),s||t.$dealloc()}.bind(this))):(t.$el.detach(),t.$isMounted()||(t.options.supportLifeCycle&&t.$callHook("viewDidUnmount",t),o&&t.$propagateLifeCycleHook("viewDidUnmount")),n&&this.$callHook("subviewDidRemove",t,this,i),s||t.$dealloc()),this)},$count:function(){return _.size(this.__subviews__)},$isEmpty:function(){return!this.$count()},$isNotEmpty:function(){return!!this.$count()},$hasSubview:function(t){return t.__superview__&&t.__superview__===this},$eachSubview:function(t,i){if(!this.$isEmpty()){var e=void 0;if(i)for(e=0;e<this.__subviews__.length;e+=1)t.call(i,this.__subviews__[e],e,this.__subviews__);else for(e=0;e<this.__subviews__.length;e+=1)t(this.__subviews__[e],e,this.__subviews__)}},$indexOfSubview:function(t,i){return _.indexOf(this.__subviews__,t,i)},$indexInSuperview:function(t){return this.__superview__?this.__superview__.$indexOfSubview(this,t):-1},$getSubviews:function(){return this.$isEmpty()?null:this.__subviews__},$getSubviewAt:function(t){return this.$isEmpty()?null:this.__subviews__[t]||null},$getSupperview:function(){return this.__superview__||null},$getFirstSubview:function(){return this.$getSubviewAt(0)},$getLastSubview:function(){return this.$getSubviewAt(this.$count()-1)},$getNextSibling:function(){var t,i;return(t=this.$getSupperview())?(i=t.$indexOfSubview(this),i===t.$count()-1?null:t.$getSubviewAt(i+1)):null},$getPrevSibling:function(){var t,i;return(t=this.$getSupperview())?(i=t.$indexOfSubview(this),0===i?null:t.$getSubviewAt(i-1)):null},$emptySubviews:function(t){var i;if(this.$isEmpty())return this;for(i=this.__$mountPoint__.hide();this.__subviews__.length;)this.$removeSubview(0,t);return this.__subviews__.length=0,this.__$mountPoint__.show(),this},$sortSubviews:function(t){var i,e;return this.$isEmpty()||!_.isFunction(t)?this:(this.$getSubviews().sort(t),i=$(document.createDocumentFragment()),e=this.__$mountPoint__,e.hide(),this.$eachSubview(function(t){return i.append(t.$el)}),e.show(),e.append(i),this)},$propagate:function(t,i){return i=_.extend(i||{},{currentTarget:this}),_.has(i,"target")||(i.target=this),this.$callHook(t,i),this.$eachSubview(function(e){e.$propagate(t,i)}),this},$dispatch:function(t,i){return i=_.extend(i||{},{currentTarget:this}),_.has(i,"target")||(i.target=this),this.$callHook(t,i),this.__superview__&&this.__superview__.$dispatch(t,i),this},$propagateLifeCycleHook:function(t){_.each(this.__subviews__,function(i){i.$callHook(t,i),i.$propagateLifeCycleHook(t)})}});_.each({map:"_$map",reduce:"_$reduce",find:"_$find",filter:"_$filter",reject:"_$reject",every:"_$every",some:"_$some",includes:"_$includes"},function(t,i){v.prototype[t]=function(){var t=_.toArray(arguments);return t.unshift(this.__subviews__||[]),_[i].apply(_,t)}});v.extend=function(t,i){var e,n=this;if(e=t&&_.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},t){if(t.shouldMergeEvents&&(t.events=_.extend({},_.result(n.prototype,"events"),_.result(t,"events"))),t.shouldMergeInitialize){var o=t.initialize;t.initialize=function(t){n.prototype.initialize.call(this,t),o.call(this,t)}}t=_.omit(t,["shouldMergeEvents","shouldMergeInitialize"])}return _.extend(e,n,i),e.prototype=_.create(n.prototype,t),e.prototype.constructor=e,e.__super__=n.prototype,e};i.exports=v},{"./binder":5,"./mixin/eventbus":8,"./mixin/life-circle":9,"./mixin/utils":10}]},{},[1]);